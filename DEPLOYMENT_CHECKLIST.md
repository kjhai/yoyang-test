# 배포 체크리스트

## 배포 전 확인사항

### 1. 코드 준비
- [ ] 모든 코드가 GitHub에 푸시되었는지 확인
- [ ] `.env` 파일이 `.gitignore`에 포함되어 있는지 확인
- [ ] 민감한 정보가 코드에 하드코딩되지 않았는지 확인
- [ ] 모든 의존성이 `package.json`에 포함되어 있는지 확인

### 2. 데이터베이스 준비
- [ ] PostgreSQL 데이터베이스 생성
- [ ] 데이터베이스 연결 정보 확인 (Internal Database URL)
- [ ] 데이터베이스 초기화 스크립트 테스트
- [ ] 문항 데이터 준비 (CSV 파일 또는 SQL)

### 3. 백엔드 준비
- [ ] `server/package.json`의 스크립트 확인
  - [ ] `start` 스크립트가 올바른지 확인
  - [ ] `build` 스크립트가 있는지 확인 (필요시)
- [ ] 환경 변수 목록 확인:
  - [ ] `NODE_ENV=production`
  - [ ] `PORT=10000` (또는 Render.com이 할당한 포트)
  - [ ] `DATABASE_URL` (Internal Database URL)
- [ ] CORS 설정 확인
- [ ] 에러 핸들링 확인

### 4. 프런트엔드 준비
- [ ] `ui/package.json`의 빌드 스크립트 확인
  - [ ] `build` 스크립트가 있는지 확인
- [ ] 환경 변수 설정:
  - [ ] `VITE_API_BASE_URL` (백엔드 API URL)
- [ ] API 엔드포인트가 올바른지 확인
- [ ] 프로덕션 빌드 테스트 (`npm run build`)

### 5. 보안 확인
- [ ] `.env` 파일이 Git에 커밋되지 않았는지 확인
- [ ] 데이터베이스 비밀번호가 안전하게 관리되는지 확인
- [ ] API 키나 토큰이 안전하게 관리되는지 확인
- [ ] CORS 설정이 적절한지 확인

## 배포 단계

### 1단계: 데이터베이스 배포
- [ ] Render.com에서 PostgreSQL 데이터베이스 생성
- [ ] 데이터베이스 이름, 사용자 이름 확인
- [ ] Internal Database URL 복사
- [ ] External Database URL 복사 (로컬 개발용)

### 2단계: 백엔드 배포
- [ ] Render.com에서 Web Service 생성
- [ ] GitHub 저장소 연결
- [ ] Root Directory: `server` 설정
- [ ] Build Command: `npm install` 설정
- [ ] Start Command: `npm start` 설정
- [ ] 환경 변수 설정:
  - [ ] `NODE_ENV=production`
  - [ ] `PORT=10000`
  - [ ] `DATABASE_URL=<Internal Database URL>`
- [ ] 서비스 생성 및 배포
- [ ] 배포 로그 확인
- [ ] 헬스 체크 엔드포인트 테스트 (`/healthz`)

### 3단계: 데이터베이스 초기화
- [ ] 데이터베이스 초기화 실행
- [ ] 스키마 생성 확인
- [ ] 초기 데이터 시드 확인
- [ ] 문항 데이터 추가 (필요시)

### 4단계: 프런트엔드 배포
- [ ] Render.com에서 Static Site 생성
- [ ] GitHub 저장소 연결
- [ ] Root Directory: `ui` 설정
- [ ] Build Command: `npm install && npm run build` 설정
- [ ] Publish Directory: `dist` 설정
- [ ] 환경 변수 설정:
  - [ ] `VITE_API_BASE_URL=<백엔드 API URL>`
- [ ] 서비스 생성 및 배포
- [ ] 배포 로그 확인
- [ ] 웹사이트 접속 테스트

### 5단계: 테스트
- [ ] 프런트엔드 접속 테스트
- [ ] 무료 시험 시작 테스트
- [ ] 문제 풀이 테스트
- [ ] 답안 제출 테스트
- [ ] 결과 확인 테스트
- [ ] 오답 풀기 테스트
- [ ] 해설 보기 테스트

## 배포 후 확인사항

### 기능 테스트
- [ ] 랜딩 페이지 정상 동작
- [ ] 무료 시험 시작 정상 동작
- [ ] 문제 풀이 정상 동작
- [ ] 답안 저장 정상 동작
- [ ] 답안 제출 정상 동작
- [ ] 결과 페이지 정상 동작
- [ ] 오답 풀기 정상 동작
- [ ] 해설 보기 정상 동작

### 성능 테스트
- [ ] 페이지 로딩 속도 확인
- [ ] API 응답 시간 확인
- [ ] 데이터베이스 쿼리 성능 확인

### 보안 테스트
- [ ] HTTPS 연결 확인
- [ ] CORS 설정 확인
- [ ] 환경 변수 노출 확인
- [ ] 데이터베이스 접근 제한 확인

### 모니터링
- [ ] 로그 모니터링 설정
- [ ] 에러 알림 설정
- [ ] 성능 모니터링 설정

## 문제 해결

### 일반적인 문제
- [ ] 데이터베이스 연결 실패 → `DATABASE_URL` 확인
- [ ] CORS 오류 → CORS 설정 확인
- [ ] 빌드 실패 → 로그 확인 및 의존성 확인
- [ ] 환경 변수 문제 → 환경 변수 설정 확인

### 로그 확인
- [ ] 백엔드 로그 확인 (Render.com 대시보드)
- [ ] 프런트엔드 빌드 로그 확인
- [ ] 데이터베이스 로그 확인

## 추가 작업

### 도메인 설정 (선택사항)
- [ ] 커스텀 도메인 설정
- [ ] DNS 설정
- [ ] SSL 인증서 확인

### 최적화
- [ ] 데이터베이스 인덱스 최적화
- [ ] 캐싱 전략 구현
- [ ] CDN 설정

### 백업
- [ ] 데이터베이스 백업 설정
- [ ] 정기 백업 스케줄 설정

## 완료 체크
- [ ] 모든 기능이 정상 동작함
- [ ] 모든 테스트 통과
- [ ] 성능이 양호함
- [ ] 보안이 적절함
- [ ] 모니터링이 설정됨

배포 완료! 🎉

